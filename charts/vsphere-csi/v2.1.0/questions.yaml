rancher_min_version: 2.5.6-rc1
rancher_max_version: 2.5.6-rc99
questions:
  - variable: csiController.vsphereConfig.generate
    label: Generate CSI vSphere Config Secret
    description: Generates a Secret that contains a CSI vSphere config and credentials (If the option to generate it is enabled, credentials will be visible in the API to authorized users)
    type: boolean
    default: true
    required: true
    group: Configuration
    show_subquestion_if: true
    subquestions:
      - variable: csiController.vsphereConfig.host
        label: vCenter Host
        description: IP address or FQDN of the vCenter
        type: string
        group: Configuration

      - variable: csiController.vsphereConfig.datacenters
        description: Comma-separated list of paths to data centers. E.g "<dc1-path>, <dc2-path>, ..."
        label: Data Centers
        type: string
        group: Configuration

      - variable: csiController.vsphereConfig.username
        label: Username
        description: Username for vCenter
        type: string
        group: Configuration

      - variable: csiController.vsphereConfig.password
        label: Password
        description: Password for vCenter
        type: password
        group: Configuration

  - variable: csiController.vsphereConfig.name
    label: CSI vSphere Config Secret Name
    description: Name of the Secret that contains a CSI vSphere config and credentials (Will not be visible in the API. More info in the README)
    type: string
    group: Configuration
    show_if: "csiController.vsphereConfig.generate=false"

  - variable: csiMigration.enabled
    label: Enable CSI Migration
    description: Enable migration of volumes provisioned by in-tree vSphere provider to CSI (Available for vSphere 7.0 U1+ only)
    type: boolean
    default: false
    group: Migration

  - variable: csiController.csiResizer.enabled
    label: Enable CSI Volume Resizer
    description: This feature is available for vSphere 7.0 U1+ only
    type: boolean
    default: false
    group: Storage

  - variable: storageClass.enabled
    default: true
    label: Create Storage Class
    description: Create a storageClass with the vSphere CSI provisioner
    type: boolean
    required: true
    show_subquestion_if: true
    group: Storage
    subquestions:
      - variable: storageClass.name
        label: Storage Class Name
        default: "vsphere-csi-sc"
        type: string

      - variable: storageClass.isDefault
        label: Default Storage Class
        description: Set the Storage Class as the default
        default: true
        type: boolean

      - variable: storageClass.storagePolicyName
        label: Storage Policy Name
        description: Name of the Storage Policy created in vCenter
        type: string

      - variable: storageClass.datastoreURL
        label: Data Store URL
        description: URL of the data store to use for new volumes (If unspecified, any data store that matches the request will be selected).
        type: string

  - variable: csiNode.driverRegSockPath
    label: Driver Registration Socket Path
    description: Path to the driver's registration socket in the CSI node daemonset
    type: string
    default: /opt/rke/var/lib/kubelet/plugins/csi.vsphere.vmware.com/csi.sock
    group: Node

  - variable: csiNode.registrationDir
    label: Registration Directory Host Path
    description: Host path to the registration's directory in the CSI node daemonset
    type: string
    default: /opt/rke/var/lib/kubelet/plugins_registry
    group: Node

  - variable: csiNode.podsMountDir
    label: Pods Mount Directory Host Path
    description: Host path to the pods mount directory in the CSI node daemonset
    type: string
    default: /opt/rke/var/lib/kubelet
    group: Node

  - variable: csiNode.pluginDir
    label: Plugin Directory Host Path
    description: Host path to the plugin's directory in the CSI node daemonset
    type: string
    default: /opt/rke/var/lib/kubelet/plugins/csi.vsphere.vmware.com
    group: Node
